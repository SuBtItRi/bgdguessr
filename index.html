<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∏—Å–∫ –ø–æ –ë–µ–ª–≥–æ—Ä–æ–¥—É</title>
    <link rel="icon" href="images/logo.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <link rel="stylesheet" href="magnify.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" charset="utf-8"></script>
    <style>
        #warning-message {
            display: none;
        }

        @media only screen and (orientation: portrait) {
            #main {
                display: none;
            }

            #warning-message {
                display: block;
            }
        }

        @media only screen and (orientation: landscape) {
            #warning-message {
                display: none;
            }
        }

        body {
            --background-color: white;
            --background-slider: whitesmoke;
            --background-game: whitesmoke;
            background-color: var(--background-game);
            color: black;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-image: url('images/bg.jpg');
            background-size: cover;
            background-position: center;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            cursor: default;
        }

        body.dark-theme {
            --background-color: #292929;
            --background-slider: #dfdfdf;
            --background-game: #8c8c8c;
            color: #cacaca;
        }

        .column {
            width: 50%; /* –®–∏—Ä–∏–Ω–∞ –∫–∞–∂–¥–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ */
            border: 1px solid #e8e8e8; /* –ì—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è */
            padding: 10px;
            box-sizing: border-box;
        }

        .container {
            margin-bottom: 7%;
            text-align: center;
        }

        .search-box {
            background-color: var(--background-color);
            padding: 20px;
            border-radius: 10px;
            line-height: 0.5;
        }

        .start-game-popup {
            background-color: var(--background-color);
            padding: 20px;
            border-radius: 10px;
            line-height: 0.5;
        }

        .click-btn {
            justify-content: center;
            align-items: center;
            margin: 0.5rem;
            line-height: 35px;
            border: 1px solid;
            border-radius: 5px;
            text-align: center;
            font-size: 16px;
            text-decoration: none;
            transition: all 0.35s;
            box-sizing: border-box;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1.3px;
            font-weight: 700;
        }

        .btn {
            background-image: linear-gradient(to right, #52b69a 0%, #76c893 51%, #52b69a 100%);
            background-size: 200% auto;
            background-position: left top;
            border-color: transparent;
            color: var(--background-color);
            position: relative;
            width: 150px;
        }

        .btn:hover {
            background-position: right bottom;
            color: springgreen;
            border-color: mediumspringgreen;

            &::before {
                width: 100%;
                border-width: 1px 0 1px 0;
            }

            &::after {
                height: 100%;
                border-width: 0 1px 0 1px;
            }
        }

        .btn::before,
        .btn::after {
            position: absolute;
            top: 0;
            left: 0;
            border-radius: 5px;
            border-style: solid;
            transition: all 0.35s;
            content: "";
            z-index: 1;
        }

        .btn::before {
            width: 0;
            height: 100%;
            border-color: mediumspringgreen;
            border-width: 1px 0 1px 0;
        }

        .btn::after {
            width: 100%;
            height: 0;
            border-color: mediumspringgreen;
            border-width: 0 1px 0 1px;
        }

        .close-btn {
            background-image: linear-gradient(to right, #ef4b4b 0%, #f86d6d 51%, #ef4b4b 100%);
            background-size: 200% auto;
            background-position: left top;
            border-color: transparent;
            color: var(--background-color);
            position: relative;
            width: 150px;
        }

        .close-btn:hover {
            background-position: right bottom;
            color: #ff0000;
            border-color: #fa0000;

            &::before {
                width: 100%;
                border-width: 1px 0 1px 0;
            }

            &::after {
                height: 100%;
                border-width: 0 1px 0 1px;
            }
        }

        .close-btn::before,
        .close-btn::after {
            position: absolute;
            top: 0;
            left: 0;
            border-radius: 5px;
            border-style: solid;
            transition: all 0.35s;
            content: "";
            z-index: 1;
        }

        .close-btn::before {
            width: 0;
            height: 100%;
            border-color: #fa0000;
            border-width: 1px 0 1px 0;
        }

        .close-btn::after {
            width: 100%;
            height: 0;
            border-color: #fa0000;
            border-width: 0 1px 0 1px;
        }

        .dark-btn {
            background-image: linear-gradient(to right, rgb(41, 41, 41) 0%, rgb(60, 60, 60) 51%, rgb(41, 41, 41) 100%);
            background-size: 200% auto;
            background-position: left top;
            border-color: transparent;
            color: var(--background-color);
            position: relative;
            width: 150px;
        }

        .dark-btn:hover {
            background-position: right bottom;
            color: black;
            border-color: black;

            &::before {
                width: 100%;
                border-width: 1px 0 1px 0;
            }

            &::after {
                height: 100%;
                border-width: 0 1px 0 1px;
            }
        }

        .dark-btn::before,
        .dark-btn::after {
            position: absolute;
            top: 0;
            left: 0;
            border-radius: 5px;
            border-style: solid;
            transition: all 0.35s;
            content: "";
            z-index: 1;
        }

        .dark-btn::before {
            width: 0;
            height: 100%;
            border-color: black;
            border-width: 1px 0 1px 0;
        }

        .dark-btn::after {
            width: 100%;
            height: 0;
            border-color: black;
            border-width: 0 1px 0 1px;
        }

        .dark-btn.light-btn {
            background-image: linear-gradient(to right, rgb(195, 195, 195) 0%, rgb(220, 220, 220) 51%, rgb(195, 195, 195) 100%);
            background-size: 200% auto;
            background-position: left top;
            border-color: transparent;
            color: var(--background-color);
            position: relative;
            width: 150px;
        }

        .dark-btn.light-btn:hover {
            background-position: right bottom;
            color: white;
            border-color: white;

            &::before {
                width: 100%;
                border-width: 1px 0 1px 0;
            }

            &::after {
                height: 100%;
                border-width: 0 1px 0 1px;
            }
        }

        .dark-btn.light-btn::before,
        .dark-btn.light-btn::after {
            position: absolute;
            top: 0;
            left: 0;
            border-radius: 5px;
            border-style: solid;
            transition: all 0.35s;
            content: "";
            z-index: 1;
        }

        .dark-btn.light-btn::before {
            width: 0;
            height: 100%;
            border-color: white;
            border-width: 1px 0 1px 0;
        }

        .dark-btn.light-btn::after {
            width: 100%;
            height: 0;
            border-color: white;
            border-width: 0 1px 0 1px;
        }

        #toggle-btn {
            position: absolute;
            border: none;
            background: none;
            padding: 1px 1px;
            font-size: 30px;
            border-radius: 25px;
            cursor: pointer;
            z-index: 9999;
            left: 15px;
            top: 15px;
        }

        .find-wrap {
            align-items: center;
            justify-content: center;
            position: absolute;
            left: 5%;
            bottom: 20%;
        }

        .nc-wrap {
            position: absolute;
            justify-content: center;
            bottom: 20%;
            left: 52.5%;
        }

        .game-btn {
            min-width: 200px;
            min-height: 60px;
            font-family: 'Nunito', sans-serif;
            font-size: 22px;
            text-transform: uppercase;
            letter-spacing: 1.3px;
            font-weight: 700;
            color: #313133;
            background: #4FD1C5;
            background: linear-gradient(90deg, rgba(129, 230, 217, 1) 0%, rgba(79, 209, 197, 1) 100%);
            border: none;
            border-radius: 1000px;
            box-shadow: 12px 12px 24px rgba(79, 209, 197, .64);
            transition: all 0.3s ease-in-out 0s;
            cursor: pointer;
            outline: none;
            position: relative;
            padding: 10px;
        }

        .game-btn::before {
            content: '';
            border-radius: 1000px;
            min-width: calc(200px + 12px);
            min-height: calc(60px + 12px);
            border: 6px solid #00FFCB;
            box-shadow: 0 0 60px rgba(0, 255, 203, .64);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: all .3s ease-in-out 0s;
        }

        .game-btn:hover, .game-btn:focus {
            color: #313133;
            transform: translateY(-6px);
        }

        .game-btn:hover::before, .game-btn:focus::before {
            opacity: 1;
        }

        .game-btn::after {
            content: '';
            width: 30px;
            height: 30px;
            border-radius: 100%;
            border: 6px solid #00FFCB;
            position: absolute;
            z-index: -1;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: ring 1.5s infinite;
        }

        .game-btn:hover::after, .game-btn:focus::after {
            animation: none;
            display: none;
        }

        @keyframes ring {
            0% {
                width: 30px;
                height: 30px;
                opacity: 1;
            }
            100% {
                width: 200px;
                height: 200px;
                opacity: 0;
            }
        }

        .hidden {
            display: none;
        }

        .flex {
            display: flex;
        }

        .result-box {
            position: absolute;
            top: 0;
            right: 0;
            width: 60%;
            bottom: 0;
        }

        .result-img {
            width: 100%;
            pointer-events: none;
        }

        #map {
            position: absolute;
            top: 0;
            left: 0;
            width: 40%;
            height: 100%;
        }

        .indicator {
            font-family: 'Nunito', sans-serif;
            margin-top: -5px;
            font-size: 24px;
            background-color: #4FD1C5;
            border: none;
            padding: 10px 20px;
            color: #313133;
            text-transform: uppercase;
            letter-spacing: 1.3px;
            font-weight: 700;
        }

        #score {
            font-family: 'Nunito', sans-serif;
            margin-top: 0;
            font-size: 24px;
            border: none;
            padding: 10px 20px;
            color: var(--background-slider);
            text-transform: uppercase;
            letter-spacing: 1.3px;
            font-weight: 700;
        }

        #image-counter {
            margin-right: 20%;
        }

        #score-indicator {
            margin-left: 20%;
        }

        #info-popup, #end-game-popup, #acc-popup, #settings-popup, #achiev-popup {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--background-color);
            padding: 20px;
            border-radius: 10px;
            z-index: 999;
            align-content: center;
            width: 50%;
        }

        .text-settings-popup {
            position: absolute;
            text-align: left;
            font-size: 20px;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
            line-height: 2.75;
        }

        .button-settings-popup {
            text-align: right;
        }

        #upd-popup {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--background-color);
            padding: 20px;
            border-radius: 10px;
            z-index: 999;
            width: 60%;
            height: 65%;
        }

        #add-upd-popup {
            max-height: 75%;
            overflow-y: scroll;
        }

        p {
            line-height: 1.2;
            text-align: left;
        }

        h4 {
            line-height: 0;
            text-align: left;
        }

        a {
            color: #00b2ff; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ —Å—Å—ã–ª–∫–∏ */
            text-decoration: blink; /* –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å—Å—ã–ª–∫–∏ */
        }

        .yt {
            color: red;
        }

        .yt:hover {
            color: #d80000;
        }

        .vk {
            color: dodgerblue;
        }

        a:hover {
            color: #007bc6; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ —Å—Å—ã–ª–∫–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }

        .logo {
            pointer-events: none;
        }

        .logo-p {
            width: 85%;
            height: auto;
        }

        .slider-container {
            position: relative;
        }

        .tick-labels {
            position: absolute;
            width: 107%;
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            top: 15px; /* –ü–æ–ª–æ–∂–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É */
            text-transform: uppercase;
            right: -3%;
        }

        .tick-labels.bottom {
            top: calc(100% + 5px); /* –ü–æ–ª–æ–∂–µ–Ω–∏–µ —Å–Ω–∏–∑—É */
            width: 107%;
            right: -5%;
        }

        .slider {
            margin-top: 30px;
            -webkit-appearance: none;
            width: 100%;
            height: 25px;
            border-radius: 15px; /* –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ */
            background: linear-gradient(to right, #32a852 0%, #ffec06 50%, #d9534f 100%);
            -webkit-transition: .2s;
            transition: opacity .2s;
        }

        .slider:hover {
            opacity: 1;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 27px;
            height: 27px;
            border-radius: 100%;
            background: var(--background-slider);
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 26px;
            height: 26px;
            border-radius: 100%;
            background: #000000;
            cursor: pointer;
        }

        #timer {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #4FD1C5;
            color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            z-index: 9999;
        }

        .image-container {
            width: 100%;
        }

        .loading-overlay {
            position: absolute;
            top: 15%;
            left: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .loading-spinner {
            border: 4px solid #ffffff;
            border-top: 4px solid #4FD1C5;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .text-field__input {
            width: 95%;
            height: calc(2.25rem + 2px);
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            color: #212529;
            background-color: #fff;
            border: 1px solid #bdbdbd;
            border-radius: 0.25rem;
        }

        .mv1sb, .mv2sb, .mv3sb {
            position: absolute;
            display: none;
            z-index: 9999;
            width: 35%;
            height: auto;
            border-radius: 10px;
        }

        #mapviev1-settings-btn:hover + .mv1sb, #mapviev2-settings-btn:hover + .mv2sb, #mapviev3-settings-btn:hover + .mv3sb {
            display: block;
            pointer-events: none;
            transform: translate(-4%, -70%);
        }


    </style>
</head>
<body>
<div id="main" class="container">
    <button id="toggle-btn">üîá</button>
    <div class="search-box">
        <img class="logo" src="images/logo-dark.jpg" alt="–õ–æ–≥–æ—Ç–∏–ø">
        <h4>–í–µ—Ä—Å–∏—è: <span id="version"></span></h4>
        <button id="start-btn" class="click-btn btn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        <button id="info-btn" class="click-btn btn">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
        <button id="upd-btn" class="click-btn btn">–û–±–Ω–æ–≤–ª–µ–Ω–∏—è</button>
        <br>
        <button id="acc-btn" class="click-btn btn">–ê–∫–∫–∞—É–Ω—Ç</button>
        <button id="settings-btn" class="click-btn btn">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        <button id="achiev-btn" class="click-btn btn">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
    </div>
    <div class="start-game-popup hidden">
        <h1>¬†¬†¬†¬†¬†¬†–¢–∞–π–º –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç¬†¬†¬†¬†¬†¬†¬†</h1>
        <div class="slider-container">
            <div class="tick-labels top">
                <span>Íùé—Å–µ–∫</span>
                <span>35—Å–µ–∫</span>
                <span>30—Å–µ–∫</span>
                <span>25—Å–µ–∫</span>
                <span>20—Å–µ–∫</span>
                <span>15—Å–µ–∫</span>
                <span>10—Å–µ–∫</span>
                <span>5—Å–µ–∫</span>
            </div>
            <input type="range" min="1" max="8" value="0" class="slider" id="myRange">
            <div class="tick-labels bottom">
                <span>10 –æ—á.</span>
                <span>50 –æ—á.</span>
                <span>60 –æ—á.</span>
                <span>70 –æ—á.</span>
                <span>80 –æ—á.</span>
                <span>90 –æ—á.</span>
                <span>100 –æ—á.</span>
                <span>200 –æ—á.</span>
            </div>
        </div>
        <button id="start-game" class="click-btn btn" style="margin-top: 10%">–ò–≥—Ä–∞—Ç—å</button>
        <button id="back-btn" class="click-btn close-btn">–ù–∞–∑–∞–¥</button>
    </div>
    <div id="info-popup" class="hidden">
        <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–µ</h2>
        <h4>–ü—Ä–∞–≤–∏–ª–∞:</h4>
        <p>–í–∞–º –±—É–¥–µ—Ç –¥–∞–Ω–æ —Ñ–æ—Ç–æ, –≤—ã –¥–æ–ª–∂–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–µ –Ω–∞–π—Ç–∏ –≥–¥–µ –æ–Ω–æ —Å–¥–µ–ª–∞–Ω–æ, —Å—Ç–∞–≤—å—Ç–µ —Ç–æ—á–∫—É –∏ –Ω–∞–∂–∏–º–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É
            "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å". –¢–∞–∫–∏—Ö —Ñ–æ—Ç–æ –±—É–¥–µ—Ç 5, –ø–æ—Å–ª–µ –ø–æ–¥–≤–æ–¥—è—Ç—Å—è –∏—Ç–æ–≥–∏ –∏–≥—Ä—ã.</p>
        <h4>–ü–æ—á–µ–º—É BGDGUESSR?</h4>
        <p>BGDGUESSR = Bgd guessr = Belgorod guess = –£–≥–∞–¥–∞–π –ë–µ–ª–≥–æ—Ä–æ–¥</p>
        <h3>–°–æ–∑–¥–∞—Ç–µ–ª—å: SuBtItRi –≤ <a href="https://t.me/SuBtItRi">TG</a>,
            <a href="https://vk.com/wolfzxc" class="vk">VK</a>¬†¬†¬†|¬†¬†¬†–ü–æ–º–æ–≥–∞–ª: Ugrock –≤
            <a href="https://t.me/ugrock78">TG</a>, <a href="https://www.youtube.com/@Ugrock_78" class="yt">YT</a>
        </h3>
        <button id="close-info-btn" class="click-btn close-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
    <div id="upd-popup" class="hidden">
        <h2>–°–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π</h2>
        <div id="add-upd-popup">
            <div class="flex">
                <div class="column" id="update-list"></div>
                <div class="column" id="what-update"></div>
            </div>
        </div>
        <button id="close-upd-btn" class="click-btn close-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
    <div id="acc-popup" class="hidden">
        <h2>–ê–∫–∫–∞—É–Ω—Ç</h2>
        <h3>–ö–æ–≥–¥–∞-—Ç–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –∞–∫–∫–∞—É–Ω—Ç—ã...</h3>
        <!--
        <div>
            <input id="login" type="text" class="text-field__input" placeholder="–õ–æ–≥–∏–Ω"><br><br>
            <input id="pass" type="text" class="text-field__input" placeholder="–ü–∞—Ä–æ–ª—å">
            <button id="login-acc-btn" class="click-btn btn">–í–æ–π—Ç–∏</button>
            <button id="register-acc-btn" class="click-btn btn hidden">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </div>
        -->
        <button id="close-acc-btn" class="click-btn close-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
        <br>
    </div>
    <div id="settings-popup" class="hidden">
        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
        <div class="text-settings-popup">–°–º–µ–Ω–∞ —Ç–µ–º—ã —Å–∞–π—Ç–∞ –Ω–∞</div>
        <div class="button-settings-popup">
            <button id="theme-settings-btn" class="click-btn dark-btn">–¢–µ–º–Ω—É—é</button>
        </div>
        <div class="text-settings-popup">–ê–≤—Ç–æ–ø—Ä–∏–±–ª–µ–∂–µ–Ω–∏–µ –∫ –º–µ—Ç–∫–µ</div>
        <div class="button-settings-popup">
            <button id="zoommap-settings-btn" class="click-btn btn">–í–∫–ª</button>
        </div>
        <div class="text-settings-popup">–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –∫–∞—Ä—Ç—ã</div>
        <div class="button-settings-popup">
            <button id="mapviev1-settings-btn" class="click-btn close-btn">–°—Ö–µ–º–∞</button>
            <img class="mv1sb" src="images/—Å—Ö–µ–º–∞.jpg">
            <button id="mapviev2-settings-btn" class="click-btn close-btn">–°–ø—É—Ç–Ω–∏–∫</button>
            <img class="mv2sb" src="images/—Å–ø—É—Ç–Ω–∏–∫.jpg">
            <button id="mapviev3-settings-btn" class="click-btn btn">–ì–∏–±—Ä–∏–¥</button>
            <img class="mv3sb" src="images/–≥–∏–±—Ä–∏–¥.jpg"></div>
        <br><br>
        <button id="close-settings-btn" class="click-btn close-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
    <div id="achiev-popup" class="hidden">
        <h2>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
        <h3>–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
        <button id="close-achiev-btn" class="click-btn close-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
    <div class="result-box hidden">
        <div id="timer" class="hidden">
            <div id="countdown"></div>
        </div>
        <img id="load" style="width: 100%" src="images/load.jpg">
        <div class="image-container">
            <div class="loading-overlay">
                <div class="loading-spinner"></div>
            </div>
            <img id="image" class="zoom result-img hidden" src="" data-magnify-src="">
        </div>
        <div class="indicator">
            <span id="image-counter">1/5</span>
            <span id="score-indicator"></span>
        </div>
        <div id="score"></div>
        <div class="find-wrap">
            <button id="find-btn" class="game-btn hidden">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        </div>
        <div class="nc-wrap">
            <button id="next-btn" class="game-btn hidden">–î–∞–ª–µ–µ</button>
            <button id="skip-btn" class="game-btn">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
            <button id="continue-btn" class="click-btn game-btn hidden">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>
    <div id="map" class="hidden"></div>
    <div id="end-game-popup" class="hidden">
        <h1>–ò—Ç–æ–≥–∏ –∏–≥—Ä—ã</h1>
        <h2>–í–∞—à –∏—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç: <br><span id="final-score">0</span></h2>
        <h2><span id="u-cool"></span></h2>
        <h5><span id="later-achiev"></span></h5>
        <button id="restart-btn" class="click-btn close-btn" style="width: 200px">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
    </div>
</div>
<div id="warning-message" class="container">
    <div class="search-box">
        <img class="logo-p" src="images/logo-dark.jpg" alt="–õ–æ–≥–æ—Ç–∏–ø">
        <h3>–ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç <br><br>—Ç–æ–ª—å–∫–æ –≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏,<br><br> –ø–µ—Ä–µ–≤–µ—Ä–Ω–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω</h3>
    </div>
</div>
<script src="https://api-maps.yandex.ru/2.1/?apikey=–≤–∞—à_–∫–ª—é—á_–∞–ø–∏&lang=ru_RU" type="text/javascript"></script>
<script src="jquery.magnify.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var audio = new Audio('music.mp3')
        audio.loop = true // –ß—Ç–æ–±—ã –º—É–∑—ã–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–ª–∞—Å—å
        audio.volume = 0.1
        audio.pause()
        var pointCount = 1
        var ImageCounter = 1
        var vl = 0
        var score = 0
        var found = false
        var links = document.querySelectorAll('a') // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        var updateListDiv = document.getElementById('update-list')
        var whatUpdateDiv = document.getElementById('what-update')
        const slider = document.getElementById("myRange")
        var mode = 10; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
        var time
        var c_time
        var timer
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
        const currentTheme = localStorage.getItem('theme')
        if (currentTheme == "dark") {
            document.querySelector('.logo').src = 'images/logo-light.jpg';
            document.querySelector('.logo-p').src = 'images/logo-light.jpg';
            document.body.classList.add("dark-theme");
            document.getElementById('theme-settings-btn').classList.add('light-btn');
            document.getElementById('theme-settings-btn').innerText = '—Å–≤–µ—Ç–ª—É—é';
        }

        const currentZoommap = localStorage.getItem('zoommap')
        if (currentZoommap == '0') {
            document.getElementById('zoommap-settings-btn').classList.add('close-btn');
            document.getElementById('zoommap-settings-btn').classList.remove('btn');
            document.getElementById('zoommap-settings-btn').innerText = '–≤—ã–∫–ª';
            var zoommap = '0'
        }
        if (currentZoommap == '1') {
            document.getElementById('zoommap-settings-btn').classList.remove('close-btn');
            document.getElementById('zoommap-settings-btn').classList.add('btn');
            document.getElementById('zoommap-settings-btn').innerText = '–≤–∫–ª';
            var zoommap = '1'
        }

        const currentMapviev = localStorage.getItem('mapviev')
        var mapviev = 'yandex#hybrid'
        if (currentMapviev == 'yandex#map') {
            document.getElementById('mapviev1-settings-btn').classList.add('btn')
            document.getElementById('mapviev1-settings-btn').classList.remove('close-btn')
            document.getElementById('mapviev2-settings-btn').classList.remove('btn')
            document.getElementById('mapviev2-settings-btn').classList.add('close-btn')
            document.getElementById('mapviev3-settings-btn').classList.remove('btn')
            document.getElementById('mapviev3-settings-btn').classList.add('close-btn')
            mapviev = 'yandex#map'
        }
        if (currentMapviev == 'yandex#satellite') {
            document.getElementById('mapviev1-settings-btn').classList.remove('btn')
            document.getElementById('mapviev1-settings-btn').classList.add('close-btn')
            document.getElementById('mapviev2-settings-btn').classList.add('btn')
            document.getElementById('mapviev2-settings-btn').classList.remove('close-btn')
            document.getElementById('mapviev3-settings-btn').classList.remove('btn')
            document.getElementById('mapviev3-settings-btn').classList.add('close-btn')
            mapviev = 'yandex#satellite'
        }
        if (currentMapviev == 'yandex#hybrid') {
            document.getElementById('mapviev1-settings-btn').classList.remove('btn')
            document.getElementById('mapviev1-settings-btn').classList.add('close-btn')
            document.getElementById('mapviev2-settings-btn').classList.remove('btn')
            document.getElementById('mapviev2-settings-btn').classList.add('close-btn')
            document.getElementById('mapviev3-settings-btn').classList.add('btn')
            document.getElementById('mapviev3-settings-btn').classList.remove('close-btn')
            mapviev = 'yandex#hybrid'
        }


        // –ù–∞—Ö–æ–¥–∏–º pointCounter
        (async () => {
            while (true) {
                try {
                    const response = await fetch(`images/${pointCount}.png`, {method: 'HEAD'});
                    if (response.ok) {
                        pointCount++;
                    } else {
                        pointCount--;
                        console.log(`–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ ${pointCount} —Ç–æ—á–µ–∫.`);
                        break;
                    }
                } catch (err) {
                    console.error(err);
                    break;
                }
            }
        })();

        function start_zoom() {
            $(document).ready(function () {
                var $zoom = $('.zoom').magnify();
                $zoom.destroy();
            });
        }

        function start_timer() {
            document.getElementById("image").style.visibility = "hidden";
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å —É—Å–ø–µ—à–Ω–æ
            document.querySelector('.result-img').onload = function () {
                document.getElementById("image").style.visibility = "visible";
                // –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å, –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
                document.getElementById("timer").classList.remove("hidden");
                time = c_time;
                if (mode === 10) {
                    document.getElementById("countdown").textContent = 'Íùé';
                } else {
                    document.getElementById("countdown").textContent = time;
                    timer = setInterval(function () {
                        time--;
                        document.getElementById("countdown").textContent = time;
                        if (time <= 0) {
                            clearInterval(timer);
                            document.getElementById("timer").classList.add("hidden");
                        }
                        if (time === 0) {
                            document.getElementById('find-btn').click();
                        }
                    }, 1000);
                }
                if (time <= 0) {
                    document.getElementById("countdown").textContent = '0';
                    clearInterval(timer);
                }
                document.getElementById("load").classList.add("hidden");
            };
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–∑—É–Ω–∫–∞
        slider.addEventListener('input', function () {
            const m_values = [10, 50, 60, 70, 80, 90, 100, 200];
            mode = m_values[parseInt(this.value) - 1];
            const t_values = [-1, 35, 30, 25, 20, 15, 10, 5];
            c_time = t_values[parseInt(this.value) - 1];
            time = c_time;
        });
        // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —á–∏—Å–µ–ª
        var usedNumbers = [];
        document.getElementById('toggle-btn').addEventListener('click', function () {
            vl++;
            if (vl === 0) {
                audio.pause();
                document.getElementById('toggle-btn').innerText = 'üîá'
            }
            if (vl === 1) {
                audio.play()
                audio.volume = 0.05;
                document.getElementById('toggle-btn').innerText = 'üîà¬†'
            }
            if (vl === 2) {
                audio.play()
                audio.volume = 0.1;
                document.getElementById('toggle-btn').innerText = 'üîâ'
            }
            if (vl === 3) {
                audio.play()
                audio.volume = 0.3;
                document.getElementById('toggle-btn').innerText = 'üîä'
            }
            if (vl > 3) {
                vl = -1;
            }
        });

        document.getElementById('toggle-btn').addEventListener("contextmenu", function (event) {
            event.preventDefault();
            vl--;
            if (vl <= 0) {
                audio.pause();
                document.getElementById('toggle-btn').innerText = 'üîá'
                vl = 4;
            }
            if (vl === 1) {
                audio.play()
                audio.volume = 0.05;
                document.getElementById('toggle-btn').innerText = 'üîà¬†'
            }
            if (vl === 2) {
                audio.play()
                audio.volume = 0.1;
                document.getElementById('toggle-btn').innerText = 'üîâ'
            }
            if (vl === 3) {
                audio.play()
                audio.volume = 0.3;
                document.getElementById('toggle-btn').innerText = 'üîä'
            }
            if (vl < 0) {
                vl = 4;
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞
        function getRandomNumber(min, max) {
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ
            var randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª–æ –ª–∏ —ç—Ç–æ —á–∏—Å–ª–æ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ
            if (usedNumbers.includes(randomNumber)) {
                // –ï—Å–ª–∏ —á–∏—Å–ª–æ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤–æ–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
                return getRandomNumber(min, max);
            } else {
                // –ï—Å–ª–∏ —á–∏—Å–ª–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ –≤ –º–∞—Å—Å–∏–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —á–∏—Å–µ–ª –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ
                usedNumbers.push(randomNumber);
                return randomNumber;
            }
        }

        // update-list
        var ul = new XMLHttpRequest();
        ul.onreadystatechange = function () {
            if (ul.readyState === XMLHttpRequest.DONE) {
                if (ul.status === 200) {
                    var updateList = ul.responseText.trim();
                    formatUpdateList(updateList);
                } else {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞:', ul.status);
                }
            }
        };
        ul.open('GET', 'update-list.txt', true);
        ul.send();

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        function formatUpdateList(updateList) {
            var updates = updateList.split(/\n(?=\.\d+\.\d+)/); // –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –ø–æ –≤–µ—Ä—Å–∏—è–º
            var html = '';
            updates.forEach(function (update) {
                var parts = update.split(/\n/); // –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –≤–µ—Ä—Å–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
                var version = parts.shift(); // –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ - –≤–µ—Ä—Å–∏—è
                document.getElementById('version').textContent = version;
                var description = parts.join('<br>'); // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ - –æ–ø–∏—Å–∞–Ω–∏–µ
                html += '<p>' + version + '</p>'; // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
                html += '<p>' + description + '</p>'; // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è
            });
            updateListDiv.innerHTML = '<h4>–£–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ:</h4>' + html; // –í—Å—Ç–∞–≤–∫–∞ HTML –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
        }

        // what-update
        var wu = new XMLHttpRequest();
        wu.onreadystatechange = function () {
            if (wu.readyState === XMLHttpRequest.DONE) {
                if (wu.status === 200) {
                    var whatUpdate = wu.responseText.trim();
                    formatWhatUpdate(whatUpdate);
                } else {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞:', wu.status);
                }
            }
        };
        wu.open('GET', 'what-update.txt', true);
        wu.send();

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞, —á—Ç–æ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å
        function formatWhatUpdate(whatUpdate) {
            var whatUpdates = whatUpdate.split(/\n(?=\d+\.\d+\.\d+)/); // –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –ø–æ –≤–µ—Ä—Å–∏—è–º
            var html = '';
            whatUpdates.forEach(function (whatUpdate) {
                var wparts = whatUpdate.split(/\n/); // –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –≤–µ—Ä—Å–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
                var wdescription = wparts.join('<br>'); // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ - –æ–ø–∏—Å–∞–Ω–∏–µ
                html += '<p>' + wdescription + '</p>'; // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è
            });
            whatUpdateDiv.innerHTML = '<h4>–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:</h4>' + html; // –í—Å—Ç–∞–≤–∫–∞ HTML –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
        }

        links.forEach(function (link) {
            link.setAttribute('target', '_blank'); // –î–æ–±–∞–≤–ª—è–µ–º –∞—Ç—Ä–∏–±—É—Ç target="_blank"
        });

        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
        });

        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
        document.addEventListener('selectstart', function (e) {
            e.preventDefault();
        })

        document.getElementById('info-btn').addEventListener('click', function () {
            document.getElementById('info-popup').classList.remove('hidden');
            document.querySelector('.search-box').classList.add('hidden');
        })
        document.getElementById('close-info-btn').addEventListener('click', function () {
            document.getElementById('info-popup').classList.add('hidden');
            document.querySelector('.search-box').classList.remove('hidden');
        })
        document.getElementById('upd-btn').addEventListener('click', function () {
            document.getElementById('upd-popup').classList.remove('hidden');
            document.querySelector('.search-box').classList.add('hidden');
        })
        document.getElementById('close-upd-btn').addEventListener('click', function () {
            document.getElementById('upd-popup').classList.add('hidden');
            document.querySelector('.search-box').classList.remove('hidden');
        })
        document.getElementById('acc-btn').addEventListener('click', function () {
            document.getElementById('acc-popup').classList.remove('hidden');
            document.querySelector('.search-box').classList.add('hidden');
        })
//                    document.getElementById('login-acc-btn').addEventListener('click', function () {
//            const login = localStorage.getItem("login");
//            const pass = localStorage.getItem("pass");
//            if (document.getElementById('login').value === login) {
//                if (document.getElementById('pass').value === pass) {
//
//                } else {
//                    document.getElementById('pass').value = '–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!'
//                                            document.getElementById('login-acc-btn').classList.add('hidden');
//                    document.getElementById('register-acc-btn').classList.remove('hidden');
//                }
//            } else {
//                document.getElementById('login').value = '–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω!'
//                                }
//        })
        document.getElementById('close-acc-btn').addEventListener('click', function () {
            document.getElementById('acc-popup').classList.add('hidden');
            document.querySelector('.search-box').classList.remove('hidden');
        })
        document.getElementById('settings-btn').addEventListener('click', function () {
            document.getElementById('settings-popup').classList.remove('hidden');
            document.querySelector('.search-box').classList.add('hidden');
        })
        document.getElementById('theme-settings-btn').addEventListener('click', function () {
            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∫–ª–∞—Å—Å .dark-theme –ø—Ä–∏ –∫–∞–∂–¥–æ–º —â–µ–ª—á–∫–µ
            document.body.classList.toggle("dark-theme");
            document.querySelector('.logo').src = 'images/logo-dark.jpg';
            document.querySelector('.logo-p').src = 'images/logo-dark.jpg';
            document.getElementById('theme-settings-btn').classList.toggle('light-btn');
            document.getElementById('theme-settings-btn').innerText = '—Ç–µ–º–Ω—É—é';
            // –î–æ–ø—É—Å—Ç–∏–º, —Ç–µ–º–∞ —Å–≤–µ—Ç–ª–∞—è
            let theme = "light";
            // –ï—Å–ª–∏ <body> —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å .dark-theme‚Ä¶
            if (document.body.classList.contains("dark-theme")) {
                // ‚Ä¶—Ç–æ–≥–¥–∞ –¥–µ–ª–∞–µ–º —Ç–µ–º—É —Ç—ë–º–Ω–æ–π
                theme = "dark";
                document.querySelector('.logo').src = 'images/logo-light.jpg';
                document.querySelector('.logo-p').src = 'images/logo-light.jpg';
                document.getElementById('theme-settings-btn').innerText = '—Å–≤–µ—Ç–ª—É—é';
            }
            // –ü–æ—Å–ª–µ —á–µ–≥–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±–æ—Ä –≤ localStorage
            localStorage.setItem("theme", theme);
        })
        document.getElementById('zoommap-settings-btn').addEventListener('click', function () {
            const currentZoommap = localStorage.getItem('zoommap')
            if (currentZoommap == '0') {
                document.getElementById('zoommap-settings-btn').classList.remove('close-btn');
                document.getElementById('zoommap-settings-btn').classList.add('btn');
                document.getElementById('zoommap-settings-btn').innerText = '–≤–∫–ª';
                zoommap = 1
            }
            if (currentZoommap == '1') {
                document.getElementById('zoommap-settings-btn').classList.add('close-btn');
                document.getElementById('zoommap-settings-btn').classList.remove('btn');
                document.getElementById('zoommap-settings-btn').innerText = '–≤—ã–∫–ª';
                zoommap = 0
            }
            localStorage.setItem("zoommap", zoommap);
        })
        document.getElementById('mapviev1-settings-btn').addEventListener('click', function () {
            document.getElementById('mapviev1-settings-btn').classList.add('btn')
            document.getElementById('mapviev1-settings-btn').classList.remove('close-btn')
            document.getElementById('mapviev2-settings-btn').classList.remove('btn')
            document.getElementById('mapviev2-settings-btn').classList.add('close-btn')
            document.getElementById('mapviev3-settings-btn').classList.remove('btn')
            document.getElementById('mapviev3-settings-btn').classList.add('close-btn')
            mapviev = 'yandex#map'
            localStorage.setItem('mapviev', mapviev)
        })
        document.getElementById('mapviev2-settings-btn').addEventListener('click', function () {
            document.getElementById('mapviev1-settings-btn').classList.remove('btn')
            document.getElementById('mapviev1-settings-btn').classList.add('close-btn')
            document.getElementById('mapviev2-settings-btn').classList.add('btn')
            document.getElementById('mapviev2-settings-btn').classList.remove('close-btn')
            document.getElementById('mapviev3-settings-btn').classList.remove('btn')
            document.getElementById('mapviev3-settings-btn').classList.add('close-btn')
            mapviev = 'yandex#satellite'
            localStorage.setItem('mapviev', mapviev)
        })
        document.getElementById('mapviev3-settings-btn').addEventListener('click', function () {
            document.getElementById('mapviev1-settings-btn').classList.remove('btn')
            document.getElementById('mapviev1-settings-btn').classList.add('close-btn')
            document.getElementById('mapviev2-settings-btn').classList.remove('btn')
            document.getElementById('mapviev2-settings-btn').classList.add('close-btn')
            document.getElementById('mapviev3-settings-btn').classList.add('btn')
            document.getElementById('mapviev3-settings-btn').classList.remove('close-btn')
            mapviev = 'yandex#hybrid'
            localStorage.setItem('mapviev', mapviev)
        })

        document.getElementById('close-settings-btn').addEventListener('click', function () {
            document.getElementById('settings-popup').classList.add('hidden');
            document.querySelector('.search-box').classList.remove('hidden');
        })

        document.getElementById('achiev-btn').addEventListener('click', function () {
            document.getElementById('achiev-popup').classList.remove('hidden');
            document.querySelector('.search-box').classList.add('hidden');
        })

        document.getElementById('close-achiev-btn').addEventListener('click', function () {
            document.getElementById('achiev-popup').classList.add('hidden');
            document.querySelector('.search-box').classList.remove('hidden');
        })

        document.getElementById('start-btn').addEventListener('click', function () {
            document.querySelector('.search-box').classList.add('hidden');
            document.querySelector('.start-game-popup').classList.remove('hidden')
        })
        document.getElementById('back-btn').addEventListener('click', function () {
            document.querySelector('.search-box').classList.remove('hidden');
            document.querySelector('.start-game-popup').classList.add('hidden')
        })
        document.getElementById('start-game').addEventListener('click', function () {
            document.getElementById('score-indicator').innerText = score + '/' + mode * 5;
            document.body.style.backgroundImage = 'none';
            document.querySelector('.start-game-popup').classList.add('hidden');
            document.querySelector('.result-box').classList.remove('hidden');
            document.querySelector('#map').classList.remove('hidden');
            document.getElementById('toggle-btn').innerText = 'üîâ'
            vl = 2;
            var randomNum = getRandomNumber(1, pointCount);
            var imgSrc = 'images/' + randomNum + '.png';
            document.querySelector('.result-img').src = imgSrc;
            document.getElementById('image').setAttribute('data-magnify-src', imgSrc);
            start_timer();
            start_zoom()
            audio.play();
            ymaps.ready(init);

            function init() {
                var myMap = new ymaps.Map('map', {
                    center: [50.595414, 36.587277],
                    zoom: 12,
                    controls: [],
                    type: mapviev
                });
                myMap.events.add('click', function (e) {
                    if (!found) {
                        var coords = e.get('coords');

                        if (myMap.geoObjects.getLength() > 0) {
                            myMap.geoObjects.removeAll();
                        }

                        var placemark = new ymaps.Placemark(coords, {}, {
                            preset: 'islands#greenDotIcon'
                        });

                        myMap.geoObjects.add(placemark);

                        if (myMap.geoObjects.getLength() > 1) {
                            var line = new ymaps.Polyline([
                                myMap.geoObjects.get(0).geometry.getCoordinates(),
                                myMap.geoObjects.get(1).geometry.getCoordinates()
                            ], {}, {
                                strokeColor: '#ff0000',
                                strokeWidth: 2
                            });
                            myMap.geoObjects.add(line);
                        }

                        document.getElementById('find-btn').classList.remove('hidden');
                    }
                });
                var objectsBefore = myMap.geoObjects.getLength();
                document.getElementById('find-btn').addEventListener('click', function () {
                    if (!found) {
                        var objectsAfter = myMap.geoObjects.getLength();
                        fetch('coordinates.txt')
                            .then(response => response.text())
                            .then(data => {
                                var coordinates = data.trim().split('\n');
                                var redPointCoords = coordinates[randomNum - 1].split(', ');

                                var redPlacemark = new ymaps.Placemark(redPointCoords, {}, {
                                    preset: 'islands#redDotIcon'
                                });

                                myMap.geoObjects.add(redPlacemark);

                                // –ü–æ–ª—É—á–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–µ–ª–µ–Ω–æ–π —Ç–æ—á–∫–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Ç–æ—á–∫–∏)
                                var userCoords = myMap.geoObjects.get(0).geometry.getCoordinates();

                                // –°–æ–∑–¥–∞–µ–º –ø–æ–ª–∏–ª–∏–Ω–∏—é, —Å–æ–µ–¥–∏–Ω—è—é—â—É—é —ç—Ç–∏ —Ç–æ—á–∫–∏
                                var line = new ymaps.Polyline([
                                    userCoords,
                                    redPointCoords
                                ], {}, {
                                    strokeColor: '#000000', // –¶–≤–µ—Ç –ª–∏–Ω–∏–∏ (–∑–µ–ª–µ–Ω—ã–π)
                                    strokeWidth: 5 // –¢–æ–ª—â–∏–Ω–∞ –ª–∏–Ω–∏–∏
                                });
                                // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–∏–ª–∏–Ω–∏—é –Ω–∞ –∫–∞—Ä—Ç—É
                                myMap.geoObjects.add(line);
                                var distance = Math.round(ymaps.coordSystem.geo.getDistance(userCoords, redPointCoords));
                                var scoreForRound = Math.max(0, Math.round((3000 - distance) / (3000 / mode)));
                                var zoommap = localStorage.getItem('zoommap')
                                var zoom
                                if (objectsAfter != objectsBefore) {
                                    score += scoreForRound;
                                    if (distance <= 0.5) {
                                        document.getElementById('score').innerText = '–ó–∞ —ç—Ç—É —Ç–æ—á–∫—É –≤—ã –ø–æ–ª—É—á–∏–ª–∏ ' + scoreForRound + ' –æ—á–∫–æ–≤ (' + distance + '–º –¥–æ —Ç–æ—á–∫–∏) \n (–∑–∞ —ç—Ç–æ –±—É–¥–µ—Ç –ø–æ—Ç–æ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µüòÑ)';
                                    } else {
                                        document.getElementById('score').innerText = '–ó–∞ —ç—Ç—É —Ç–æ—á–∫—É –≤—ã –ø–æ–ª—É—á–∏–ª–∏ ' + scoreForRound + ' –æ—á–∫–æ–≤ (' + distance + '–º –¥–æ —Ç–æ—á–∫–∏)';
                                    }
                                    if (distance <= 100) {
                                        zoom = 18
                                    } else if (distance <= 500) {
                                        zoom = 17
                                    } else if (distance <= 1000) {
                                        zoom = 16
                                    } else if (distance <= 2500) {
                                        zoom = 15
                                    } else if (distance <= 5000) {
                                        zoom = 14
                                    } else if (distance <= 10000) {
                                        zoom = 13
                                    } else {
                                        zoom = 12
                                    }
                                    if (zoommap == '1') {
                                        myMap.setCenter([[(userCoords[0] + redPointCoords[0]) / 2], [(userCoords[1] + parseFloat(String(redPointCoords[1]).replace(/\r/g, ''), 10)) / 2]], zoom);
                                    }
                                } else {
                                    document.getElementById('score').innerText = '–í—ã –Ω–µ –ø–æ—Å—Ç–∞–≤–∏–ª–∏ —Ç–æ—á–∫—É (0 –æ—á–∫–æ–≤)';
                                    scoreForRound = 0;
                                    if (zoommap == '1') {
                                        myMap.setCenter(redPointCoords, zoom);
                                    }
                                }
                                document.getElementById('score-indicator').innerText = score + '/' + mode * 5 + ' +' + scoreForRound;
                                document.getElementById('find-btn').classList.add('hidden');
                                document.getElementById('score').classList.remove('hidden');
                                document.getElementById('next-btn').classList.add('hidden')
                                document.getElementById('skip-btn').classList.add('hidden');
                                setTimeout(() => {
                                    document.getElementById('score').classList.add('hidden')
                                    if (ImageCounter < 5) {
                                        document.getElementById('next-btn').classList.remove('hidden');
                                    } else {
                                        document.getElementById('next-btn').classList.add('hidden')
                                        document.getElementById('continue-btn').classList.remove('hidden');
                                    }
                                }, 5000);
                                found = true;
                            })
                            .catch(error => console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞:', error));
                    }
                });
                document.getElementById('skip-btn').addEventListener('click', function () {
                    if (!found) {
                        fetch('coordinates.txt')
                            .then(response => response.text())
                            .then(data => {
                                var coordinates = data.trim().split('\n');
                                var redPointCoords = coordinates[randomNum - 1].split(',');

                                var redPlacemark = new ymaps.Placemark(redPointCoords, {}, {
                                    preset: 'islands#redDotIcon'
                                });
                                myMap.geoObjects.add(redPlacemark);
                                document.getElementById('score-indicator').innerText = score + '/' + mode * 5 + ' –ø—Ä–æ–ø—É—Å–∫';
                                document.getElementById('find-btn').classList.add('hidden');
                                document.getElementById('score').classList.remove('hidden');
                                document.getElementById('next-btn').classList.add('hidden')
                                document.getElementById('skip-btn').classList.add('hidden');
                                document.getElementById('score').classList.add('hidden')
                                clearInterval(timer);
                                if (ImageCounter < 5) {
                                    document.getElementById('next-btn').classList.remove('hidden');
                                } else {
                                    document.getElementById('next-btn').classList.add('hidden')
                                    document.getElementById('continue-btn').classList.remove('hidden');
                                }
                                found = true;
                            })
                            .catch(error => console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞:', error));
                    }
                });
                document.getElementById('next-btn').addEventListener('click', function () {
                    document.getElementById('next-btn').classList.add('hidden')
                    myMap.setCenter([50.595414, 36.587277], 13);
                    ImageCounter++;
                    if (ImageCounter <= 5) {
                        document.getElementById('image-counter').innerText = ImageCounter + '/5';
                        document.getElementById('score').classList.add('hidden');
                        document.getElementById('find-btn').classList.add('hidden')
                        document.getElementById('skip-btn').classList.remove('hidden')
                        myMap.geoObjects.removeAll();
                        objectsBefore = myMap.geoObjects.getLength();
                        randomNum = getRandomNumber(1, pointCount);
                        imgSrc = "images/" + randomNum + '.png';
                        document.querySelector('.result-img').src = imgSrc;
                        document.getElementById('image').setAttribute('data-magnify-src', imgSrc);
                        start_timer()
                        start_zoom()
                        found = false;
                    } else {
                        document.getElementById('next-btn').classList.add('hidden')
                        setTimeout(() => {
                            document.getElementById('score').classList.add('hidden')
                            document.getElementById('continue-btn').classList.remove('hidden')
                        }, 5000);
                    }
                });

                document.getElementById('continue-btn').addEventListener('click', function () {
                    document.getElementById('end-game-popup').classList.remove('hidden');
                    document.getElementById('final-score').innerText = score;
                    if (score === 1000) {
                        document.getElementById('u-cool').innerText = 'üéâ–í–û–¢ –≠–¢–ê –¢–´ –ö–†–£–¢–û–ô, –ü–û–ó–î–†–ê–í–õ–Ø–Æüéâ';
                        document.getElementById('later-achiev').innerText = '(–ü–æ–∑–∂–µ –∑–∞ —ç—Ç–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ)üòé';
                    } else {
                        var mode1 = mode * 5
                        var mode075 = mode * 5 * 0.75
                        var mode05 = mode * 5 * 0.5
                        var mode025 = mode * 5 * 0.25
                        if (score === 0) {
                            document.getElementById('u-cool').innerText = '–°–µ—Ä—å–µ–∑–Ω–æ, –Ω–æ–ª—å?';
                            document.getElementById('later-achiev').innerText = '(–ü–æ–∑–∂–µ –∑–∞ —ç—Ç–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µüòÖ)';
                        }
                        if (score > 0) {
                            document.getElementById('u-cool').innerText = '–ß—É—Ç—å –±–æ–ª—å—à–µ –Ω—É–ª—è üòÖ';
                        }
                        if (score > mode025) {
                            document.getElementById('u-cool').innerText = '–ß—É—Ç—å –º–µ–Ω—å—à–µ –ø–æ–ª–æ–≤–∏–Ω—ã üò¢';
                        }
                        if (score > mode05) {
                            document.getElementById('u-cool').innerText = '–ß—É—Ç—å –±–æ–ª—å—à–µ –ø–æ–ª–æ–≤–∏–Ω—ã üòâ';
                        }
                        if (score > mode075) {
                            document.getElementById('u-cool').innerText = 'üòÑ–ê —Ç—ã –Ω–µ–ø–ª–æ—ÖüòÑ';
                        }
                        if (score === mode1) {
                            document.getElementById('u-cool').innerText = 'üéâ100%, –¢–´ –ú–û–õ–û–î–ï–¶üéâ';
                        }
                    }
                    document.getElementById('restart-btn').addEventListener('click', function () {
                        location.reload();
                    });
                });
            }
        });
    });
</script>
</body>
</html>