<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∏—Å–∫ –ø–æ –ë–µ–ª–≥–æ—Ä–æ–¥—É</title>
    <link rel="icon" href="images/logo.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <link rel="stylesheet" href="magnify.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" charset="utf-8"></script>
    <style>
        #warning-message {
            display: none;
        }

        @media only screen and (orientation: portrait) {
            #main {
                display: none;
            }

            #warning-message {
                display: block;
            }
        }

        @media only screen and (orientation: landscape) {
            #warning-message {
                display: none;
            }
        }

        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-image: url('images/bg.png');
            background-size: cover;
            background-position: center;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            cursor: default;
        }

        .column {
            width: 50%; /* –®–∏—Ä–∏–Ω–∞ –∫–∞–∂–¥–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ */
            border: 1px solid #e8e8e8; /* –ì—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è */
            padding: 10px;
            box-sizing: border-box;
        }

        .container {
            margin-bottom: 7%;
            text-align: center;
        }

        .search-box {
            background-color: rgba(255, 255, 255);
            padding: 20px;
            border-radius: 10px;
            line-height: 0.5;
        }

        .start-game-popup {
            background-color: rgba(255, 255, 255);
            padding: 20px;
            border-radius: 10px;
            line-height: 0.5;
        }

        .click-btn {
            justify-content: center;
            align-items: center;
            margin: 0.5rem;
            line-height: 35px;
            border: 1px solid;
            border-radius: 5px;
            text-align: center;
            font-size: 16px;
            text-decoration: none;
            transition: all 0.35s;
            box-sizing: border-box;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1.3px;
            font-weight: 700;
        }

        .btn {
            background-image: linear-gradient(to right, #52b69a 0%, #76c893 51%, #52b69a 100%);
            background-size: 200% auto;
            background-position: left top;
            border-color: transparent;
            color: white;
            position: relative;
        }

        .btn:hover {
            background-position: right bottom;
            color: springgreen;
            border-color: mediumspringgreen;

            &::before {
                width: 100%;
                border-width: 1px 0 1px 0;
            }

            &::after {
                height: 100%;
                border-width: 0 1px 0 1px;
            }
        }

        .btn::before,
        .btn::after {
            position: absolute;
            top: 0;
            left: 0;
            border-radius: 5px;
            border-style: solid;
            transition: all 0.35s;
            content: "";
            z-index: 1;
        }

        .btn::before {
            width: 0;
            height: 100%;
            border-color: mediumspringgreen;
            border-width: 1px 0 1px 0;
        }

        .btn::after {
            width: 100%;
            height: 0;
            border-color: mediumspringgreen;
            border-width: 0 1px 0 1px;
        }

        .close-btn {
            background-image: linear-gradient(to right, #ef4b4b 0%, #f86d6d 51%, #ef4b4b 100%);
            background-size: 200% auto;
            background-position: left top;
            border-color: transparent;
            color: white;
            position: relative;
        }

        .close-btn:hover {
            background-position: right bottom;
            color: #ff0000;
            border-color: #fa0000;

            &::before {
                width: 100%;
                border-width: 1px 0 1px 0;
            }

            &::after {
                height: 100%;
                border-width: 0 1px 0 1px;
            }
        }

        .close-btn::before,
        .close-btn::after {
            position: absolute;
            top: 0;
            left: 0;
            border-radius: 5px;
            border-style: solid;
            transition: all 0.35s;
            content: "";
            z-index: 1;
        }

        .close-btn::before {
            width: 0;
            height: 100%;
            border-color: #fa0000;
            border-width: 1px 0 1px 0;
        }

        .close-btn::after {
            width: 100%;
            height: 0;
            border-color: #fa0000;
            border-width: 0 1px 0 1px;
        }

        #toggle-btn {
            position: absolute;
            border: none;
            background: none;
            padding: 1px 1px;
            font-size: 30px;
            border-radius: 25px;
            cursor: pointer;
            z-index: 9999;
            left: 15px;
            top: 15px;
        }

        .find-wrap {
            align-items: center;
            justify-content: center;
            position: absolute;
            left: 5%;
            bottom: 20%;
        }

        .nc-wrap {
            position: absolute;
            justify-content: center;
            bottom: 20%;
            left: 52.5%;
        }

        .game-btn {
            min-width: 200px;
            min-height: 60px;
            font-family: 'Nunito', sans-serif;
            font-size: 22px;
            text-transform: uppercase;
            letter-spacing: 1.3px;
            font-weight: 700;
            color: #313133;
            background: #4FD1C5;
            background: linear-gradient(90deg, rgba(129, 230, 217, 1) 0%, rgba(79, 209, 197, 1) 100%);
            border: none;
            border-radius: 1000px;
            box-shadow: 12px 12px 24px rgba(79, 209, 197, .64);
            transition: all 0.3s ease-in-out 0s;
            cursor: pointer;
            outline: none;
            position: relative;
            padding: 10px;
        }

        .game-btn::before {
            content: '';
            border-radius: 1000px;
            min-width: calc(200px + 12px);
            min-height: calc(60px + 12px);
            border: 6px solid #00FFCB;
            box-shadow: 0 0 60px rgba(0, 255, 203, .64);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: all .3s ease-in-out 0s;
        }

        .game-btn:hover, .game-btn:focus {
            color: #313133;
            transform: translateY(-6px);
        }

        .game-btn:hover::before, .game-btn:focus::before {
            opacity: 1;
        }

        .game-btn::after {
            content: '';
            width: 30px;
            height: 30px;
            border-radius: 100%;
            border: 6px solid #00FFCB;
            position: absolute;
            z-index: -1;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: ring 1.5s infinite;
        }

        .game-btn:hover::after, .game-btn:focus::after {
            animation: none;
            display: none;
        }

        @keyframes ring {
            0% {
                width: 30px;
                height: 30px;
                opacity: 1;
            }
            100% {
                width: 200px;
                height: 200px;
                opacity: 0;
            }
        }

        .hidden {
            display: none;
        }

        .flex {
            display: flex;
        }

        .result-box {
            position: absolute;
            top: 0;
            right: 0;
            width: 60%;
            bottom: 0;
        }

        .result-img {
            width: 100%;
            pointer-events: none;
        }

        #map {
            position: absolute;
            top: 0;
            left: 0;
            width: 40%;
            height: 100%;
        }

        .indicator {
            font-family: 'Nunito', sans-serif;
            margin-top: -5px;
            font-size: 24px;
            background-color: #4FD1C5;
            border: none;
            padding: 10px 20px;
            color: #313133;
            text-transform: uppercase;
            letter-spacing: 1.3px;
            font-weight: 700;
        }

        #score {
            font-family: 'Nunito', sans-serif;
            margin-top: 0;
            font-size: 24px;
            border: none;
            padding: 10px 20px;
            color: #313133;
            text-transform: uppercase;
            letter-spacing: 1.3px;
            font-weight: 700;
        }

        #image-counter {
            margin-right: 20%;
        }

        #score-indicator {
            margin-left: 20%;
        }

        #info-popup, #end-game-popup {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255);
            padding: 20px;
            border-radius: 10px;
            z-index: 999;
            text-align: center;
            width: 800px;
        }

        #upd-popup {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255);
            padding: 20px;
            border-radius: 10px;
            z-index: 999;
            width: 60%;
            height: 75%;
        }

        #add-upd-popup {
            height: 85%;
            overflow-y: scroll;
        }

        p {
            line-height: 1.2;
            text-align: left;
        }

        h4 {
            line-height: 0;
            text-align: left;
        }

        a {
            color: #00b2ff; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ —Å—Å—ã–ª–∫–∏ */
            text-decoration: blink; /* –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å—Å—ã–ª–∫–∏ */
        }

        .yt {
            color: red;
        }

        .yt:hover {
            color: #d80000;
        }

        .vk {
            color: dodgerblue;
        }

        a:hover {
            color: #007bc6; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ —Å—Å—ã–ª–∫–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }

        .logo {
            pointer-events: none;
        }

        .logo-p {
            width: 85%;
            height: auto;
        }

        .start-popup {
            display: none;
            position: absolute;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .start {
            margin-top: 10%;
        }

        .start:hover + .start-popup {
            display: block;
        }

        .slider-container {
            position: relative;
        }

        .tick-labels {
            position: absolute;
            width: 107%;
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            top: 15px; /* –ü–æ–ª–æ–∂–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É */
            color: #313133;
            text-transform: uppercase;
            right: -3%;
        }

        .tick-labels.bottom {
            top: calc(100% + 5px); /* –ü–æ–ª–æ–∂–µ–Ω–∏–µ —Å–Ω–∏–∑—É */
            width: 107%;
            right: -5%;
        }

        .slider {
            margin-top: 30px;
            -webkit-appearance: none;
            width: 100%;
            height: 25px;
            border-radius: 12px; /* –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ */
            background: linear-gradient(to right, #32a852 0%, #ffec06 50%, #d9534f 100%);
            -webkit-transition: .2s;
            transition: opacity .2s;
        }

        .slider:hover {
            opacity: 1;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 26px;
            height: 26px;
            border-radius: 100%;
            background: #000000;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 26px;
            height: 26px;
            border-radius: 100%;
            background: #000000;
            cursor: pointer;
        }

        #timer {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #4FD1C5;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            z-index: 9999;
        }
    </style>
</head>
<body>
<div id="main" class="container">
    <button id="toggle-btn">üîá</button>
    <div class="search-box">
        <img class="logo" src="images/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø">
        <h4>–í–µ—Ä—Å–∏—è: <span id="version"></span></h4>
        <button id="start-btn" class="click-btn btn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        <button id="info-btn" class="click-btn btn">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
        <button id="upd-btn" class="click-btn btn">–°–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π</button>
    </div>
    <div class="start-game-popup hidden">
        <h1>¬†¬†¬†¬†¬†¬†–¢–∞–π–º –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç¬†¬†¬†¬†¬†¬†¬†</h1>
        <div class="slider-container">
            <div class="tick-labels top">
                <span>Íùé—Å–µ–∫</span>
                <span>35—Å–µ–∫</span>
                <span>30—Å–µ–∫</span>
                <span>25—Å–µ–∫</span>
                <span>20—Å–µ–∫</span>
                <span>15—Å–µ–∫</span>
                <span>10—Å–µ–∫</span>
                <span>5—Å–µ–∫</span>
            </div>
            <input type="range" min="1" max="8" value="0" class="slider" id="myRange">
            <div class="tick-labels bottom">
                <span>10 –æ—á.</span>
                <span>50 –æ—á.</span>
                <span>60 –æ—á.</span>
                <span>70 –æ—á.</span>
                <span>80 –æ—á.</span>
                <span>90 –æ—á.</span>
                <span>100 –æ—á.</span>
                <span>200 –æ—á.</span>
            </div>
        </div>
        <button id="start-game" class="click-btn start btn">–ò–≥—Ä–∞—Ç—å</button>
        <button id="back-btn" class="click-btn close-btn btn">–ù–∞–∑–∞–¥</button>
        <div class="start-popup">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–µ—Ç–µ –≤—Ä–µ–º—è –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–µ –Ω–∞ —Ç–æ—á–∫—É</div>
    </div>
    <div id="info-popup" class="hidden">
        <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–µ</h2>
        <h4>–ü—Ä–∞–≤–∏–ª–∞:</h4>
        <p>–í–∞–º –±—É–¥–µ—Ç –¥–∞–Ω–æ —Ñ–æ—Ç–æ, –≤—ã –¥–æ–ª–∂–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–µ –Ω–∞–π—Ç–∏ –≥–¥–µ –æ–Ω–æ —Å–¥–µ–ª–∞–Ω–æ, —Å—Ç–∞–≤—å—Ç–µ —Ç–æ—á–∫—É –∏ –Ω–∞–∂–∏–º–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É
            "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å". –¢–∞–∫–∏—Ö —Ñ–æ—Ç–æ –±—É–¥–µ—Ç 5, –ø–æ—Å–ª–µ –ø–æ–¥–≤–æ–¥—è—Ç—Å—è –∏—Ç–æ–≥–∏ –∏–≥—Ä—ã.</p>
        <h4>–ü–æ—á–µ–º—É BGDGUESSR?</h4>
        <p>BGDGUESSR = Bgd guessr = Belgorod guess = –£–≥–∞–¥–∞–π –ë–µ–ª–≥–æ—Ä–æ–¥</p>
        <h3>–°–æ–∑–¥–∞—Ç–µ–ª—å: SuBtItRi –≤ <a href="https://t.me/SuBtItRi">TG</a>, <a href="https://vk.com/wolfzxc"
                                                                             class="vk">VK</a>¬†¬†¬†|¬†¬†¬†–ü–æ–º–æ–≥–∞–ª: Ugrock –≤ <a
                href="https://t.me/ugrock78">TG</a>, <a href="https://www.youtube.com/@Ugrock_78" class="yt">YT</a></h3>
        <button id="close-info-btn" class="click-btn close-btn hidden">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
    <div id="upd-popup" class="hidden">
        <h2>–°–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π</h2>
        <div id="add-upd-popup">
            <div class="flex">
                <div class="column" id="update-list"></div>
                <div class="column" id="what-update"></div>
            </div>
        </div>
        <button id="close-upd-btn" class="click-btn close-btn hidden">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
    <div class="result-box hidden">
        <div id="timer" class="hidden">
            <div id="countdown"></div>
        </div>
        <img id="image" class="zoom result-img" src="" alt="–†–µ–∑—É–ª—å—Ç–∞—Ç" data-magnify-src="">
        <div class="indicator">
            <span id="image-counter">1/5</span>
            <span id="score-indicator"></span>
        </div>
        <div id="score"></div>
        <div class="find-wrap">
            <button id="find-btn" class="game-btn hidden">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        </div>
        <div class="nc-wrap">
            <button id="next-btn" class="game-btn hidden">–î–∞–ª–µ–µ</button>
            <button id="skip-btn" class="game-btn">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
            <button id="continue-btn" class="click-btn game-btn hidden">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>
    <div id="map" class="hidden"></div>
</div>
<div id="end-game-popup" class="hidden">
    <h1>–ò—Ç–æ–≥–∏ –∏–≥—Ä—ã</h1>
    <h2>–í–∞—à –∏—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç: <br><span id="final-score">0</span></h2>
    <button id="restart-btn" class="click-btn btn">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
</div>
<div id="warning-message" class="container">
    <div class="search-box">
        <img class="logo-p" src="images/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø">
        <h3>–ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç <br><br>—Ç–æ–ª—å–∫–æ –≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏,<br><br> –ø–µ—Ä–µ–≤–µ—Ä–Ω–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω</h3>
    </div>
</div>
<script src="https://api-maps.yandex.ru/2.1/?apikey=–≤–∞—à_–∫–ª—é—á_–∞–ø–∏&lang=ru_RU" type="text/javascript"></script>
<script src="jquery.magnify.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var audio = new Audio('music.mp3');
        audio.loop = true; // –ß—Ç–æ–±—ã –º—É–∑—ã–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–ª–∞—Å—å
        audio.volume = 0.1;
        audio.pause();
        var pointCount = 37;
        var vl = 0;
        var imageCounter = 1;
        var score = 0;
        var found = false
        var links = document.querySelectorAll('a'); // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        var updateListDiv = document.getElementById('update-list');
        var whatUpdateDiv = document.getElementById('what-update');
        const slider = document.getElementById("myRange");
        var mode = 10; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
        var time;
        var c_time;

        function start_zoom() {
            $(document).ready(function () {
                $('.zoom').magnify();
            });
        }

        function start_timer() {
            document.getElementById("timer").classList.remove("hidden");
            time = c_time;
            if (mode === 10) {
                document.getElementById("countdown").textContent = 'Íùé';
            } else {
                document.getElementById("countdown").textContent = time;
                var timer = setInterval(function () {
                    time--;
                    document.getElementById("countdown").textContent = time;
                    if (time <= 0) {
                        clearInterval(timer);
                        document.getElementById("timer").classList.add("hidden");
                    }
                    if (time === 0) {
                        document.getElementById('find-btn').click();
                    }
                }, 1000);
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–∑—É–Ω–∫–∞
        slider.addEventListener('input', function () {
            const m_values = [10, 50, 60, 70, 80, 90, 100, 200];
            mode = m_values[parseInt(this.value) - 1];
            const t_values = [-1, 35, 30, 25, 20, 15, 10, 5];
            c_time = t_values[parseInt(this.value) - 1];
            time = c_time;
        });
        // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —á–∏—Å–µ–ª
        var usedNumbers = [];
        document.getElementById('toggle-btn').addEventListener('click', function () {
            vl++;
            if (vl === 0) {
                audio.pause();
                document.getElementById('toggle-btn').innerText = 'üîá'
            }
            if (vl === 1) {
                audio.play()
                audio.volume = 0.05;
                document.getElementById('toggle-btn').innerText = 'üîà¬†'
            }
            if (vl === 2) {
                audio.play()
                audio.volume = 0.1;
                document.getElementById('toggle-btn').innerText = 'üîâ'
            }
            if (vl === 3) {
                audio.play()
                audio.volume = 0.3;
                document.getElementById('toggle-btn').innerText = 'üîä'
            }
            if (vl > 3) {
                vl = -1;
            }
        });

        document.getElementById('toggle-btn').addEventListener("contextmenu", function (event) {
            event.preventDefault();
            vl--;
            if (vl <= 0) {
                audio.pause();
                document.getElementById('toggle-btn').innerText = 'üîá'
                vl = 4;
            }
            if (vl === 1) {
                audio.play()
                audio.volume = 0.05;
                document.getElementById('toggle-btn').innerText = 'üîà¬†'
            }
            if (vl === 2) {
                audio.play()
                audio.volume = 0.1;
                document.getElementById('toggle-btn').innerText = 'üîâ'
            }
            if (vl === 3) {
                audio.play()
                audio.volume = 0.3;
                document.getElementById('toggle-btn').innerText = 'üîä'
            }
            if (vl < 0) {
                vl = 4;
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞
        function getRandomNumber(min, max) {
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ
            var randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª–æ –ª–∏ —ç—Ç–æ —á–∏—Å–ª–æ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ
            if (usedNumbers.includes(randomNumber)) {
                // –ï—Å–ª–∏ —á–∏—Å–ª–æ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤–æ–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
                return getRandomNumber(min, max);
            } else {
                // –ï—Å–ª–∏ —á–∏—Å–ª–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ –≤ –º–∞—Å—Å–∏–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —á–∏—Å–µ–ª –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ
                usedNumbers.push(randomNumber);
                return randomNumber;
            }
        }

        // update-list
        var ul = new XMLHttpRequest();
        ul.onreadystatechange = function () {
            if (ul.readyState === XMLHttpRequest.DONE) {
                if (ul.status === 200) {
                    var updateList = ul.responseText.trim();
                    formatUpdateList(updateList);
                } else {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞:', ul.status);
                }
            }
        };
        ul.open('GET', 'update-list.txt', true);
        ul.send();

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        function formatUpdateList(updateList) {
            var updates = updateList.split(/\n(?=\.\d+\.\d+)/); // –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –ø–æ –≤–µ—Ä—Å–∏—è–º
            var html = '';
            updates.forEach(function (update) {
                var parts = update.split(/\n/); // –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –≤–µ—Ä—Å–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
                var version = parts.shift(); // –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ - –≤–µ—Ä—Å–∏—è
                document.getElementById('version').textContent = version;
                var description = parts.join('<br>'); // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ - –æ–ø–∏—Å–∞–Ω–∏–µ
                html += '<p>' + version + '</p>'; // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
                html += '<p>' + description + '</p>'; // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è
            });
            updateListDiv.innerHTML = '<h4>–£–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ:</h4>' + html; // –í—Å—Ç–∞–≤–∫–∞ HTML –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
        }

        // what-update
        var wu = new XMLHttpRequest();
        wu.onreadystatechange = function () {
            if (wu.readyState === XMLHttpRequest.DONE) {
                if (wu.status === 200) {
                    var whatUpdate = wu.responseText.trim();
                    formatWhatUpdate(whatUpdate);
                } else {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞:', wu.status);
                }
            }
        };
        wu.open('GET', 'what-update.txt', true);
        wu.send();

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        function formatWhatUpdate(whatUpdate) {
            var whatUpdates = whatUpdate.split(/\n(?=\d+\.\d+\.\d+)/); // –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –ø–æ –≤–µ—Ä—Å–∏—è–º
            var html = '';
            whatUpdates.forEach(function (whatUpdate) {
                var wparts = whatUpdate.split(/\n/); // –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –≤–µ—Ä—Å–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
                var wdescription = wparts.join('<br>'); // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ - –æ–ø–∏—Å–∞–Ω–∏–µ
                html += '<p>' + wdescription + '</p>'; // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è
            });
            whatUpdateDiv.innerHTML = '<h4>–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:</h4>' + html; // –í—Å—Ç–∞–≤–∫–∞ HTML –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
        }

        links.forEach(function (link) {
            link.setAttribute('target', '_blank'); // –î–æ–±–∞–≤–ª—è–µ–º –∞—Ç—Ä–∏–±—É—Ç target="_blank"
        });
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
        });

        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
        document.addEventListener('selectstart', function (e) {
            e.preventDefault();
        });
        document.getElementById('info-btn').addEventListener('click', function () {
            document.getElementById('info-popup').classList.remove('hidden');
            document.getElementById('close-info-btn').classList.remove('hidden');
            document.querySelector('.search-box').classList.add('hidden');
        });
        document.getElementById('close-info-btn').addEventListener('click', function () {
            document.getElementById('info-popup').classList.add('hidden');
            document.getElementById('close-info-btn').classList.add('hidden');
            document.querySelector('.search-box').classList.remove('hidden');
        });
        document.getElementById('upd-btn').addEventListener('click', function () {
            document.getElementById('upd-popup').classList.remove('hidden');
            document.getElementById('close-upd-btn').classList.remove('hidden');
            document.querySelector('.search-box').classList.add('hidden');
        });
        document.getElementById('close-upd-btn').addEventListener('click', function () {
            document.getElementById('upd-popup').classList.add('hidden');
            document.getElementById('close-upd-btn').classList.add('hidden');
            document.querySelector('.search-box').classList.remove('hidden');
        });
        document.getElementById('start-btn').addEventListener('click', function () {
            document.querySelector('.search-box').classList.add('hidden');
            document.querySelector('.start-game-popup').classList.remove('hidden')
        })
        document.getElementById('back-btn').addEventListener('click', function () {
            document.querySelector('.search-box').classList.remove('hidden');
            document.querySelector('.start-game-popup').classList.add('hidden')
        })
        document.getElementById('start-game').addEventListener('click', function () {
            start_timer()
            document.getElementById('score-indicator').innerText = score + '/' + mode * 5;
            document.body.style.backgroundImage = 'none';
            document.body.style.backgroundColor = 'whitesmoke';
            document.querySelector('.start-game-popup').classList.add('hidden');
            document.querySelector('.result-box').classList.remove('hidden');
            document.querySelector('#map').classList.remove('hidden');
            document.getElementById('toggle-btn').innerText = 'üîâ'
            vl = 2;
            var randomNum = getRandomNumber(1, pointCount);
            var imgSrc = 'images/' + randomNum + '.png';
            document.querySelector('.result-img').src = imgSrc;
            document.getElementById('image').setAttribute('data-magnify-src', imgSrc);
            start_zoom()
            audio.play();
            ymaps.ready(init);

            function init() {
                var myMap = new ymaps.Map('map', {
                    center: [50.595414, 36.587277],
                    zoom: 13,
                    controls: [],
                    type: 'yandex#hybrid'
                });
                myMap.events.add('click', function (e) {
                    if (!found) {
                        var coords = e.get('coords');

                        if (myMap.geoObjects.getLength() > 0) {
                            myMap.geoObjects.removeAll();
                        }

                        var placemark = new ymaps.Placemark(coords, {}, {
                            preset: 'islands#greenDotIcon'
                        });

                        myMap.geoObjects.add(placemark);

                        if (myMap.geoObjects.getLength() > 1) {
                            var line = new ymaps.Polyline([
                                myMap.geoObjects.get(0).geometry.getCoordinates(),
                                myMap.geoObjects.get(1).geometry.getCoordinates()
                            ], {}, {
                                strokeColor: '#ff0000',
                                strokeWidth: 2
                            });
                            myMap.geoObjects.add(line);
                        }

                        document.getElementById('find-btn').classList.remove('hidden');
                    }
                });
                var objectsBefore = myMap.geoObjects.getLength();
                document.getElementById('find-btn').addEventListener('click', function () {
                    if (!found) {
                        var objectsAfter = myMap.geoObjects.getLength();
                        fetch('coordinates.txt')
                            .then(response => response.text())
                            .then(data => {
                                var coordinates = data.trim().split('\n');
                                var redPointCoords = coordinates[randomNum - 1].split(', ');

                                var redPlacemark = new ymaps.Placemark(redPointCoords, {}, {
                                    preset: 'islands#redDotIcon'
                                });

                                myMap.geoObjects.add(redPlacemark);

                                // –ü–æ–ª—É—á–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–µ–ª–µ–Ω–æ–π —Ç–æ—á–∫–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Ç–æ—á–∫–∏)
                                var userCoords = myMap.geoObjects.get(0).geometry.getCoordinates();

                                // –°–æ–∑–¥–∞–µ–º –ø–æ–ª–∏–ª–∏–Ω–∏—é, —Å–æ–µ–¥–∏–Ω—è—é—â—É—é —ç—Ç–∏ —Ç–æ—á–∫–∏
                                var line = new ymaps.Polyline([
                                    userCoords,
                                    redPointCoords
                                ], {}, {
                                    strokeColor: '#000000', // –¶–≤–µ—Ç –ª–∏–Ω–∏–∏ (–∑–µ–ª–µ–Ω—ã–π)
                                    strokeWidth: 5 // –¢–æ–ª—â–∏–Ω–∞ –ª–∏–Ω–∏–∏
                                });
                                // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–∏–ª–∏–Ω–∏—é –Ω–∞ –∫–∞—Ä—Ç—É
                                myMap.geoObjects.add(line);
                                var distance = Math.round(ymaps.coordSystem.geo.getDistance(userCoords, redPointCoords));
                                var scoreForRound = Math.max(0, Math.round((3000 - distance) / (3000 / mode)));
                                var zoom = 17;
                                if (objectsAfter != objectsBefore) {
                                    score += scoreForRound;
                                    document.getElementById('score').innerText = '–ó–∞ —ç—Ç—É —Ç–æ—á–∫—É –≤—ã –ø–æ–ª—É—á–∏–ª–∏ ' + scoreForRound + ' –æ—á–∫–æ–≤ (' + distance + '–º –¥–æ —Ç–æ—á–∫–∏)';
                                    if (distance <= 100) {
                                        zoom = 18
                                    } else if (distance <= 500) {
                                        zoom = 17
                                    } else if (distance <= 1000) {
                                        zoom = 16
                                    } else if (distance <= 2500) {
                                        zoom = 15
                                    } else if (distance <= 5000) {
                                        zoom = 14
                                    } else if (distance <= 10000) {
                                        zoom = 13
                                    } else {
                                        zoom = 12
                                    }
                                    myMap.setCenter([[(userCoords[0] + redPointCoords[0]) / 2], [(userCoords[1] + parseFloat(String(redPointCoords[1]).replace(/\r/g, ''), 10)) / 2]], zoom);
                                } else {
                                    document.getElementById('score').innerText = '–í—ã –Ω–µ –ø–æ—Å—Ç–∞–≤–∏–ª–∏ —Ç–æ—á–∫—É (0 –æ—á–∫–æ–≤)';
                                    scoreForRound = 0;
                                    myMap.setCenter(redPointCoords, zoom);
                                }
                                document.getElementById('score-indicator').innerText = score + '/' + mode * 5 + ' +' + scoreForRound;
                                document.getElementById('find-btn').classList.add('hidden');
                                document.getElementById('score').classList.remove('hidden');
                                document.getElementById('next-btn').classList.add('hidden')
                                document.getElementById('skip-btn').classList.add('hidden');
                                setTimeout(() => {
                                    document.getElementById('score').classList.add('hidden')
                                    if (imageCounter < 5) {
                                        document.getElementById('next-btn').classList.remove('hidden');
                                    } else {
                                        document.getElementById('next-btn').classList.add('hidden')
                                        document.getElementById('continue-btn').classList.remove('hidden');
                                    }
                                }, 5000);
                                found = true;
                            })
                            .catch(error => console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞:', error));
                    }
                });
                document.getElementById('skip-btn').addEventListener('click', function () {
                    if (!found) {
                        fetch('coordinates.txt')
                            .then(response => response.text())
                            .then(data => {
                                var coordinates = data.trim().split('\n');
                                var redPointCoords = coordinates[randomNum - 1].split(',');

                                var redPlacemark = new ymaps.Placemark(redPointCoords, {}, {
                                    preset: 'islands#redDotIcon'
                                });
                                myMap.geoObjects.add(redPlacemark);
                                document.getElementById('score-indicator').innerText = score + '/' + mode * 5 + ' –ø—Ä–æ–ø—É—Å–∫';
                                document.getElementById('find-btn').classList.add('hidden');
                                document.getElementById('score').classList.remove('hidden');
                                document.getElementById('next-btn').classList.add('hidden')
                                document.getElementById('skip-btn').classList.add('hidden');
                                document.getElementById('score').classList.add('hidden')
                                if (imageCounter < 5) {
                                    document.getElementById('next-btn').classList.remove('hidden');
                                } else {
                                    document.getElementById('next-btn').classList.add('hidden')
                                    document.getElementById('continue-btn').classList.remove('hidden');
                                }
                                found = true;
                            })
                            .catch(error => console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞:', error));
                    }
                });
                document.getElementById('next-btn').addEventListener('click', function () {
                    document.getElementById('next-btn').classList.add('hidden')
                    start_timer()
                    myMap.setCenter([50.595414, 36.587277], 13);
                    imageCounter++;
                    if (imageCounter <= 5) {
                        document.getElementById('image-counter').innerText = imageCounter + '/5';
                        document.getElementById('score').classList.add('hidden');
                        document.getElementById('find-btn').classList.add('hidden')
                        document.getElementById('skip-btn').classList.remove('hidden')
                        myMap.geoObjects.removeAll();
                        objectsBefore = myMap.geoObjects.getLength();
                        randomNum = getRandomNumber(1, pointCount);
                        imgSrc = "images/" + randomNum + '.png';
                        document.querySelector('.result-img').src = imgSrc;
                        document.getElementById('image').setAttribute('data-magnify-src', imgSrc);
                        start_zoom()
                        found = false;
                    } else {
                        document.getElementById('next-btn').classList.add('hidden')
                        setTimeout(() => {
                            document.getElementById('score').classList.add('hidden')
                            document.getElementById('continue-btn').classList.remove('hidden')
                        }, 5000);
                    }
                });

                document.getElementById('continue-btn').addEventListener('click', function () {
                    document.getElementById('end-game-popup').classList.remove('hidden');
                    document.getElementById('final-score').innerText = score;
                });

                document.getElementById('restart-btn').addEventListener('click', function () {
                    location.reload();
                });
            }
        });
    });
</script>
</body>
</html>